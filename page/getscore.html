<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,height=device-height">
        <title>基础雷达图</title>
        <style>::-webkit-scrollbar{display:none;}html,body{overflow:hidden;height:100%;}
#form{width: 30%;} #mountNote{width:68%;}
        </style>
    </head>
    <body>
    <div id="mountNode"></div>
        <script>/*Fixing iframe window.innerHeight 0 issue in Safari*/document.body.clientHeight;</script>
        <script src="https://gw.alipayobjects.com/os/antv/assets/g2/3.0.4/g2.min.js"></script>
        <script src="https://gw.alipayobjects.com/os/antv/assets/data-set/0.8.5/data-set.min.js"></script>
        <script>
        function gra(data) {

         const { DataView } = DataSet;
         const dv = new DataView().source(data);
         dv.transform({
             type: 'fold',
             fields: [ 'yesterday', 'today' ], // 展开字段集
             key: 'user', // key字段
             value: 'score', // value字段
         });
         const chart = new G2.Chart({
             container: 'mountNode',
             forceFit: true,
             height: window.innerHeight,
             padding: [ 20, 20, 95, 20 ],
             background: {
               fill: 'white'
             }
         });
         chart.source(dv, {
             score: {
                 min: 1,
                 max: 25
             }
         });
         chart.coord('polar', {
             radius: 0.8
         });
         chart.axis('item', {
             line: null,
             tickLine: null,
             grid: {
                 lineStyle: {
                     lineDash: null
                 },
                 hideFirstLine: false
             }
         });
         chart.axis('score', {
             line: null,
             tickLine: null,
             grid: {
                 type: 'polygon',
                 lineStyle: {
                     lineDash: null
                 }
             }
         });
         chart.legend('user', {
             marker: 'circle',
             offset: 30
         });
         chart.line().position('item*score').color('user').size(2);
         chart.point().position('item*score').color('user').shape('circle').size(4).style({
             stroke: '#fff',
             lineWidth: 1,
             fillOpacity: 1
         });
         chart.area().position('item*score').color('user');
         chart.render();
        }
        </script>
        <script>

        function getData(){
          var str = window.location.href;
          var url = new URL(str)
          var data = url.searchParams.get("data");
          gra(JSON.parse(data))
        }

        getData()

        </script>

    </body>
</html>

